---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LeadForm from '../../components/LeadForm.astro';
import { states } from '../../data/states';
import { getCitiesByState } from '../../data/cities';

export function getStaticPaths() {
  return states.map(state => ({
    params: { state: state.slug },
    props: { state }
  }));
}

const { state } = Astro.props;
const cities = getCitiesByState(state.slug);

// Build SEO title - keep under 37 chars so with suffix stays under 60
const fullStateTitle = `${state.name} Hit and Run Accident Lawyers`;
const seoTitle = fullStateTitle.length <= 37 ? fullStateTitle : `${state.name} Hit and Run Lawyers`;

const schema = {
  "@context": "https://schema.org",
  "@type": "LegalService",
  "name": `${state.name} Hit and Run Accident Lawyers`,
  "description": `Find experienced hit and run accident lawyers in ${state.name}. Free case evaluation for hit and run injury claims.`,
  "areaServed": {
    "@type": "State",
    "name": state.name
  }
};
---

<BaseLayout 
  title={seoTitle}
  description={`Find experienced hit and run accident lawyers in ${state.name}. ${state.statOfLimitations} statute of limitations. ${state.faultSystem}. Free case evaluation.`}
  schema={schema}
>
  <!-- Hero -->
  <section class="bg-primary text-white py-12">
    <div class="max-w-7xl mx-auto px-4">
      <nav class="text-sm text-gray-400 mb-4">
        <a href="/" class="hover:text-white">Home</a> ‚Üí 
        <a href="/states/" class="hover:text-white">States</a> ‚Üí 
        <span class="text-white">{state.name}</span>
      </nav>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">{state.name} Hit and Run Accident Lawyers</h1>
      <p class="text-xl text-gray-300">Find experienced hit and run accident attorneys in {state.name}</p>
    </div>
  </section>

  <div class="max-w-7xl mx-auto px-4 py-12">
    <div class="grid lg:grid-cols-3 gap-12">
      <!-- Main Content -->
      <div class="lg:col-span-2">
        <!-- Urgent Warning if applicable -->
        {state.statOfLimitations === "1 year" && (
          <div class="bg-red-100 border-l-4 border-red-500 p-4 mb-8 rounded-r-lg">
            <h2 class="font-bold text-red-800 text-lg">‚ö†Ô∏è URGENT: 1-Year Deadline</h2>
            <p class="text-red-700">{state.name} has only a 1-year statute of limitations for personal injury claims. Contact an attorney immediately to protect your rights.</p>
          </div>
        )}

        {state.faultSystem.includes("Contributory") && (
          <div class="bg-orange-100 border-l-4 border-orange-500 p-4 mb-8 rounded-r-lg">
            <h2 class="font-bold text-orange-800 text-lg">‚ö†Ô∏è Contributory Negligence State</h2>
            <p class="text-orange-700">{state.name} follows contributory negligence rules. If you're found even 1% at fault, you may be barred from recovery. An experienced attorney is critical.</p>
          </div>
        )}

        <!-- Key Laws -->
        <div class="bg-white p-6 rounded-xl shadow mb-8">
          <h2 class="text-2xl font-bold mb-6">{state.name} Hit and Run Laws</h2>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-gray-700">Statute of Limitations</h3>
              <p class="text-2xl font-bold text-primary">{state.statOfLimitations}</p>
              <p class="text-sm text-gray-500 mt-1">Time to file your claim</p>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-gray-700">Fault System</h3>
              <p class="text-lg font-bold">{state.faultSystem}</p>
              <p class="text-sm text-gray-500 mt-1">How fault affects recovery</p>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-gray-700">Minimum Insurance</h3>
              <p class="text-lg font-bold">{state.minInsurance}</p>
              <p class="text-sm text-gray-500 mt-1">Required liability coverage</p>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-gray-700">UM/UIM Coverage</h3>
              <p class="text-lg font-bold">Recommended</p>
              <p class="text-sm text-gray-500 mt-1">Critical for hit and run cases</p>
            </div>
          </div>
        </div>

        <!-- Hit and Run Criminal Penalties -->
        <div class="bg-white p-6 rounded-xl shadow mb-8">
          <h2 class="text-2xl font-bold mb-6">Hit and Run Penalties in {state.name}</h2>
          
          <div class="space-y-4">
            <div class="border-l-4 border-red-500 pl-4">
              <h3 class="font-bold">Felony Hit and Run (Injury/Death)</h3>
              <p class="text-gray-600">Hit and run causing injury or death is a felony in {state.name}, punishable by prison time, fines, and license revocation.</p>
            </div>
            
            <div class="border-l-4 border-orange-500 pl-4">
              <h3 class="font-bold">Misdemeanor Hit and Run (Property Damage)</h3>
              <p class="text-gray-600">Hit and run causing only property damage is typically a misdemeanor, but still carries significant penalties.</p>
            </div>
            
            <div class="border-l-4 border-primary pl-4">
              <h3 class="font-bold">Civil Liability</h3>
              <p class="text-gray-600">In addition to criminal penalties, hit and run drivers face civil liability for all damages caused to victims.</p>
            </div>
          </div>
        </div>

        <!-- UM/UIM Information -->
        <div class="bg-white p-6 rounded-xl shadow mb-8">
          <h2 class="text-2xl font-bold mb-4">Uninsured Motorist Coverage in {state.name}</h2>
          <p class="text-gray-600 mb-4">
            If the hit and run driver is never found, your own Uninsured Motorist (UM) coverage becomes your primary source of compensation in {state.name}. 
            We strongly recommend all drivers carry UM/UIM coverage to protect themselves in hit and run situations.
          </p>
          
          <h3 class="font-bold mb-2">UM Coverage Can Pay For:</h3>
          <ul class="list-disc list-inside space-y-2 text-gray-600">
            <li>Medical expenses and future treatment</li>
            <li>Lost wages and earning capacity</li>
            <li>Pain and suffering damages</li>
            <li>Property damage (depending on policy)</li>
          </ul>
        </div>

        <!-- What to Know -->
        <div class="bg-gray-50 p-6 rounded-xl mb-8">
          <h2 class="text-2xl font-bold mb-4">What {state.name} Hit and Run Victims Should Know</h2>
          <ul class="space-y-3">
            <li class="flex items-start gap-3">
              <span class="text-primary text-xl">‚Üí</span>
              <span>Report the hit and run to police immediately - this is required for UM claims</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-primary text-xl">‚Üí</span>
              <span>Check nearby businesses for surveillance camera footage</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-primary text-xl">‚Üí</span>
              <span>Document any vehicle description, partial plates, or debris at the scene</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-primary text-xl">‚Üí</span>
              <span>Seek medical attention even for minor injuries - symptoms often appear later</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-primary text-xl">‚Üí</span>
              <span>Contact a hit and run attorney before speaking with insurance adjusters</span>
            </li>
          </ul>
        </div>

        <!-- Major Cities -->
        <div class="bg-white p-6 rounded-xl shadow mb-8">
          <h2 class="text-2xl font-bold mb-4">Find Hit and Run Lawyers in {state.name} Cities</h2>
          <div class="flex flex-wrap gap-3">
            {state.majorMarkets.map(market => {
              const cityData = cities.find(c => c.name === market);
              return cityData ? (
                <a href={`/cities/${cityData.slug}/`} class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition">
                  {market}
                </a>
              ) : (
                <span class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg">{market}</span>
              );
            })}
          </div>
        </div>

        <!-- All Cities in State -->
        {cities.length > 0 && (
          <div class="bg-white p-6 rounded-xl shadow">
            <h2 class="text-2xl font-bold mb-4">All {state.name} Cities We Cover</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
              {cities.map(city => (
                <a href={`/cities/${city.slug}/`} class="text-primary hover:underline">
                  {city.name}
                </a>
              ))}
            </div>
          </div>
        )}
      </div>

      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <div class="sticky top-24">
          <LeadForm 
            source={`state-${state.slug}`} 
            title={`Free ${state.name} Case Review`}
            subtitle={`Speak with an attorney who knows ${state.name}'s hit and run laws.`}
          />
          
          <div class="mt-8 bg-primary text-white p-6 rounded-xl">
            <h3 class="font-bold text-lg mb-2">üöó Don't Wait</h3>
            <p class="text-gray-300 text-sm">Evidence disappears quickly in hit and run cases. Surveillance footage is often deleted within days. Contact us now.</p>
            <a href="/free-consultation/" class="mt-4 inline-block bg-white text-primary px-4 py-2 rounded font-bold hover:bg-gray-100 transition">Get Free Review</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
