---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LeadForm from '../../components/LeadForm.astro';
import { resources } from '../../data/resources';

export function getStaticPaths() {
  return resources.map(resource => ({
    params: { resource: resource.slug },
    props: { resource }
  }));
}

const { resource } = Astro.props;
const otherResources = resources.filter(r => r.slug !== resource.slug).slice(0, 5);

// Truncate title for SEO - max 31 chars for 60 total with suffix
function truncateTitle(title: string, max: number = 31): string {
  if (title.length <= max) return title;
  const t = title.substring(0, max - 3);
  const space = t.lastIndexOf(' ');
  return (space > 10 ? t.substring(0, space) : t) + '...';
}
const seoTitle = truncateTitle(resource.title);
---

<BaseLayout 
  title={seoTitle}
  description={resource.description}
>
  <section class="bg-primary text-white py-12">
    <div class="max-w-4xl mx-auto px-4">
      <nav class="text-sm text-gray-400 mb-4">
        <a href="/" class="hover:text-white">Home</a> â†’ 
        <a href="/resources/" class="hover:text-white">Resources</a> â†’ 
        <span class="text-white">{resource.category}</span>
      </nav>
      <h1 class="text-3xl md:text-4xl font-bold mb-4">{resource.title}</h1>
      <div class="text-gray-300">ðŸ“– {resource.readTime} read</div>
    </div>
  </section>

  <div class="max-w-7xl mx-auto px-4 py-12">
    <div class="grid lg:grid-cols-3 gap-12">
      <article class="lg:col-span-2 prose prose-lg max-w-none">
        <div class="bg-white p-8 rounded-xl shadow">
          <p class="text-xl text-gray-600 mb-8 border-l-4 border-secondary pl-4">{resource.description}</p>
          
          <h2>Overview</h2>
          <p>
            This comprehensive guide covers everything you need to know about {resource.title.toLowerCase()}. 
            Whether you were a driver, passenger, pedestrian, or cyclist struck by a hit and run driver, 
            understanding your rights is the first step toward fair compensation.
          </p>

          <h2>Key Information</h2>
          <ul>
            <li>Hit and run accidents happen every 43 seconds in the United States</li>
            <li>About 50% of hit and run drivers are eventually identified through investigation</li>
            <li>Uninsured Motorist (UM) coverage can protect you even if the driver is never found</li>
            <li>The statute of limitations varies by state - some are as short as 1 year</li>
            <li>Acting quickly is crucial to preserve evidence like surveillance footage</li>
          </ul>

          <h2>Important Steps After a Hit and Run</h2>
          <ol>
            <li><strong>Stay at the scene:</strong> Never chase the fleeing driver. Call 911 immediately.</li>
            <li><strong>Document everything:</strong> Vehicle description, direction of travel, partial plates, debris</li>
            <li><strong>Get witness information:</strong> Bystanders may have seen details you missed</li>
            <li><strong>Seek medical attention:</strong> Even for seemingly minor injuries</li>
            <li><strong>Check for cameras:</strong> Nearby businesses may have captured the accident</li>
            <li><strong>File a police report:</strong> Required for UM/UIM claims and finding the driver</li>
            <li><strong>Contact an attorney:</strong> Hit and run cases are complex and time-sensitive</li>
          </ol>

          <h2>Your Legal Options</h2>
          <p>
            Even if the hit and run driver is never found, you may still have options for compensation through your own Uninsured Motorist (UM) coverage. If the driver is identified, you can pursue a claim against their insurance or file a lawsuit.
          </p>
          
          <p>
            Many hit and run victims don't realize they have multiple potential sources of compensation. An experienced hit and run attorney can help identify all available coverage and pursue maximum recovery.
          </p>

          <div class="bg-primary/10 p-6 rounded-xl mt-8">
            <h3 class="text-xl font-bold mb-2">Get Personalized Guidance</h3>
            <p class="mb-4">Have questions about your specific hit and run situation? Speak with an attorney who specializes in these cases.</p>
            <a href="/free-consultation/" class="bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary-dark transition inline-block">
              Get Free Case Review â†’
            </a>
          </div>
        </div>
      </article>

      <aside class="lg:col-span-1">
        <div class="sticky top-24 space-y-8">
          <LeadForm 
            source={`resource-${resource.slug}`}
            title="Free Case Review"
            subtitle="Get answers specific to your situation."
            compact={true}
          />
          
          <div class="bg-white p-6 rounded-xl shadow">
            <h3 class="font-bold text-lg mb-4">More Resources</h3>
            <ul class="space-y-3">
              {otherResources.map(or => (
                <li>
                  <a href={`/resources/${or.slug}/`} class="text-secondary hover:underline text-sm">{or.title}</a>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </aside>
    </div>
  </div>
</BaseLayout>
